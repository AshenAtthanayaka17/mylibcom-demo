<!DOCTYPE html>
<html lang="en-GB">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mylibcom - Digital Library</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/png" href="https://img.icons8.com/?size=100&id=PaMqeFJp6WDW&format=png&color=000000">
    <link rel="stylesheet" href="css/style.css">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Noto+Sans+Sinhala:wght@400;700&display=swap');
    </style>
</head>

<body class="text-slate-200">

    <!-- Snowflake Container -->
    <div id="snowflakeContainer"></div>

    <!-- Update Notice -->
    <h6 class="text-center text-yellow-400 font-bold py-2 bg-red-900">ðŸ”” Site will be offline from 30th Nov to 26th Dec
        due to server changes!</h6>

    <!-- Navbar -->
    <nav class="sticky top-0 z-50 bg-slate-900/95 backdrop-blur-md border-b border-slate-800 shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center gap-3 cursor-pointer" onclick="resetApp()">
                    <i class="fa-solid fa-book-open text-3xl text-emerald-500"></i>
                    <span class="text-xl font-bold tracking-wide text-white">Mylib<span
                            class="text-emerald-500">Com</span></span>
                </div>

                <div class="hidden md:block flex-1 max-w-md mx-4">
                    <div class="relative">
                        <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                            <i class="fa-solid fa-magnifying-glass text-slate-500"></i>
                        </span>
                        <input type="text" id="searchInput" placeholder="Search titles, authors, or genres..."
                            class="w-full bg-slate-800 text-white border border-slate-700 rounded-full py-2 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent placeholder-slate-500 transition-all">
                    </div>
                </div>

                <div class="flex items-center gap-6" id="authSection"></div>
                <button onclick="showAccount()" class="text-emerald-400 hover:text-emerald-300 hidden" id="accountBtn">
                    <i class="fa-solid fa-user-circle text-2xl"></i>
                </button>

                <div class="md:hidden">
                    <button id="mobileMenuBtn" class="text-slate-300 hover:text-white">
                        <i class="fa-solid fa-sliders text-xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <div id="mobileSearchPanel" class="hidden md:hidden border-t border-slate-800 bg-slate-900 p-4">
            <input type="text" id="mobileSearchInput" placeholder="Search here..."
                class="w-full bg-slate-800 text-white border border-slate-700 rounded-lg py-2 px-4 focus:ring-2 focus:ring-emerald-500">
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8">
            <div class="flex flex-wrap gap-2" id="genreFilters"></div>
            <div class="flex items-center justify-between md:justify-end w-full md:w-auto text-slate-400 text-sm">
                <span id="bookCount">Showing 0 books</span>
                <div class="ml-4 flex items-center gap-2">
                    <label for="sortSelect">Sort Options:</label>
                    <select id="sortSelect"
                        class="bg-slate-800 border-none rounded text-slate-200 text-sm focus:ring-1 focus:ring-emerald-500 py-1 px-2 cursor-pointer">
                        <option value="newest">Newest</option>
                        <option value="oldest">Oldest</option>
                        <option value="rating">Top Rated</option>
                        <option value="available">Available First</option>
                    </select>
                </div>
            </div>
        </div>

        <div id="bookGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></div>

        <!-- Account Page -->
        <div id="accountPage" class="hidden">
            <div class="flex items-center justify-between mb-8">
                <h1 class="text-3xl font-bold text-white">My Account</h1>
                <button onclick="showHome()" class="text-emerald-400 hover:text-emerald-300">
                    <i class="fa-solid fa-arrow-left mr-2"></i>Back to Library
                </button>
            </div>
            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-slate-800 rounded-2xl p-6 border border-slate-700">
                    <h2 class="text-xl font-bold text-emerald-400 mb-4 flex items-center gap-2">
                        <i class="fa-solid fa-heart"></i> My Wishlist
                    </h2>
                    <div id="wishlistContainer" class="space-y-3">
                        <p class="text-slate-500">Loading your wishlist...</p>
                    </div>
                </div>
                <div class="bg-slate-800 rounded-2xl p-6 border border-slate-700">
                    <h2 class="text-xl font-bold text-yellow-400 mb-4 flex items-center gap-2">
                        <i class="fa-solid fa-book-bookmark"></i> Borrowed Books
                    </h2>
                    <div id="borrowedContainer" class="space-y-3">
                        <p class="text-slate-500">No books borrowed yet.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="noResults" class="hidden flex flex-col items-center justify-center py-20 text-slate-500">
            <i class="fa-solid fa-book-open text-6xl mb-4 opacity-20"></i>
            <p class="text-xl font-semibold">No books found</p>
            <p class="text-sm">Try adjusting your search or filters.</p>
            <button onclick="resetApp()" class="mt-4 text-emerald-400 hover:text-emerald-300 underline">Clear all
                filters</button>
        </div>
    </div>

    <!-- Footer (exact from original) -->
    <footer class="bg-slate-950 border-t border-slate-800 pt-16 pb-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-12 mb-12">
                <div>
                    <div class="flex items-center gap-2 mb-4">
                        <i class="fa-solid fa-book-open text-2xl text-emerald-500"></i>
                        <span class="text-xl font-bold tracking-wide text-white">Mylib<span
                                class="text-emerald-500">Com</span></span>
                    </div>
                    <p class="text-slate-400 text-sm leading-relaxed mb-6">
                        Perfect platform to find out if it is worth reading that book in your mind.
                    </p>
                    <div class="text-sm text-slate-500 border-l-2 border-emerald-500 pl-3">
                        <p class="font-medium text-slate-300">Credits</p>
                        <p>Designed & Developed by <span class="text-emerald-400">Ashen Atthanayaka</span></p>
                        <p class="text-xs mt-1">Icons by FontAwesome & Images by Katha.lk & Goodreads.com</p>
                    </div>
                </div>
                <div>
                    <h3 class="text-white font-bold text-lg mb-6 flex items-center gap-2">
                        <i class="fa-solid fa-shield-halved text-emerald-500 text-sm"></i> Site Priorities
                    </h3>
                    <ul class="space-y-3 text-sm text-slate-400">
                        <li><a href="https://ashenatthanayaka17.github.io/mylibcom-privacypolicy/"
                                class="hover:text-emerald-400 transition-colors flex items-center gap-2"><i
                                    class="fa-solid fa-chevron-right text-xs text-slate-600"></i> User Privacy
                                Policy</a></li>
                        <li><a href="https://ashenatthanayaka17.github.io/mylibcom-drm"
                                class="hover:text-emerald-400 transition-colors flex items-center gap-2"><i
                                    class="fa-solid fa-chevron-right text-xs text-slate-600"></i> Digital Rights
                                Management</a></li>
                        <li><a href="https://ashenatthanayaka17.github.io/mylibcom-accessability/"
                                class="hover:text-emerald-400 transition-colors flex items-center gap-2"><i
                                    class="fa-solid fa-chevron-right text-xs text-slate-600"></i> Accessibility
                                Statement</a></li>
                        <li><a href="https://ashenatthanayaka17.github.io/mylibcom-communityguidelines/"
                                class="hover:text-emerald-400 transition-colors flex items-center gap-2"><i
                                    class="fa-solid fa-chevron-right text-xs text-slate-600"></i> Community
                                Guidelines</a></li>
                        <li><a href="https://ashenatthanayaka17.github.io/mylibcom-tnc/"
                                class="hover:text-emerald-400 transition-colors flex items-center gap-2"><i
                                    class="fa-solid fa-chevron-right text-xs text-slate-600"></i> Terms of Service</a>
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-white font-bold text-lg mb-6 flex items-center gap-2">
                        <i class="fa-solid fa-headset text-emerald-500 text-sm"></i> Contact Us
                    </h3>
                    <ul class="space-y-4 text-sm text-slate-400">
                        <li class="flex items-start gap-3">
                            <div class="mt-1 bg-slate-800 p-1.5 rounded text-emerald-500"><i
                                    class="fa-solid fa-location-dot"></i></div><span>21A Islington Park
                                Street,<br>London, N1 1QB,<br>United Kingdom</span>
                        </li>
                        <li class="flex items-center gap-3">
                            <div class="bg-slate-800 p-1.5 rounded text-emerald-500"><i class="fa-solid fa-phone"></i>
                            </div><span>+44 7418 315820<br>+44 2087 967679</span>
                        </li>
                        <li class="flex items-center gap-3">
                            <div class="bg-slate-800 p-1.5 rounded text-emerald-500"><i
                                    class="fa-solid fa-envelope"></i></div><span>admin@mylibcom.co.uk</span>
                        </li>
                    </ul>
                    <div class="flex gap-3 mt-6">
                        <a href="https://www.facebook.com/a3target5Alpha/"
                            class="w-9 h-9 rounded-lg bg-slate-800 flex items-center justify-center text-slate-400 hover:bg-blue-600 hover:text-white transition-all transform hover:-translate-y-1"><i
                                class="fa-brands fa-facebook-f"></i></a>
                        <a href="https://ashenatthanayaka17.github.io/mylibcom-chatwithus/"
                            class="w-9 h-9 rounded-lg bg-slate-800 flex items-center justify-center text-slate-400 hover:bg-sky-500 hover:text-white transition-all transform hover:-translate-y-1"><i
                                class="fa-brands fa-whatsapp"></i></a>
                        <a href="https://www.instagram.com/ashenatthanayaka17/"
                            class="w-9 h-9 rounded-lg bg-slate-800 flex items-center justify-center text-slate-400 hover:bg-pink-600 hover:text-white transition-all transform hover:-translate-y-1"><i
                                class="fa-brands fa-instagram"></i></a>
                        <a href="#"
                            class="w-9 h-9 rounded-lg bg-slate-800 flex items-center justify-center text-slate-400 hover:bg-blue-700 hover:text-white transition-all transform hover:-translate-y-1"><i
                                class="fa-brands fa-youtube"></i></a>
                    </div>
                </div>
            </div>
            <div
                class="border-t border-slate-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-4 text-xs text-slate-500">
                <p>&copy; 2024 Mylibcom. All rights reserved.</p>
                <div class="flex flex-wrap justify-center gap-6">
                    <span>Ratings for your favourite books</span>
                    <span class="hidden md:inline text-slate-700">|</span>
                    <span>Server Time: GMT +0:00</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- Book Modal (exact from original) -->
    <div id="bookModal" class="fixed inset-0 z-[100] hidden" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-slate-900/90 backdrop-blur-sm transition-opacity" onclick="closeModal()"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
                <div
                    class="relative transform overflow-hidden rounded-2xl bg-slate-800 text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-2xl border border-slate-700">
                    <button onclick="closeModal()"
                        class="absolute top-4 right-4 z-10 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors cursor-pointer">
                        <i class="fa-solid fa-xmark text-xl"></i>
                    </button>
                    <div class="flex flex-col md:flex-row">
                        <div class="md:w-2/5 h-64 md:h-auto relative bg-slate-900">
                            <div id="modalImagePlaceholder"
                                class="w-full h-full flex items-center justify-center text-slate-700 bg-slate-900 absolute inset-0">
                                <i class="fa-solid fa-book text-4xl"></i>
                            </div>
                            <img id="modalImage" src="" alt="Book Cover"
                                class="absolute inset-0 w-full h-full object-cover relative z-10"
                                onerror="this.style.display='none'; document.getElementById('modalImagePlaceholder').style.display='flex'">
                        </div>
                        <div class="md:w-3/5 p-6 md:p-8">
                            <div class="flex items-start justify-between mb-2">
                                <span id="modalGenre"
                                    class="text-xs font-bold tracking-wider uppercase text-emerald-400">Fiction</span>
                                <div class="flex items-center gap-1 text-yellow-400">
                                    <i class="fa-solid fa-star"></i>
                                    <span id="modalRating" class="font-bold text-white">4.8</span>
                                </div>
                            </div>
                            <h3 id="modalTitle" class="text-2xl md:text-3xl font-bold text-white mb-1 leading-tight">
                                Book Title</h3>
                            <p id="modalAuthor" class="text-lg text-slate-300 mb-4 font-medium">by Author Name</p>
                            <div class="flex flex-wrap items-center gap-3 text-sm text-slate-400 mb-6">
                                <span id="modalYear">1999</span>
                                <span>&bull;</span>
                                <span id="modalPages">320 pages</span>
                                <span>&bull;</span>
                                <span id="modalCategory"
                                    class="px-2 py-0.5 rounded text-xs font-bold text-slate-900 bg-slate-200">Adult</span>
                            </div>
                            <div class="space-y-4">
                                <div>
                                    <h4 class="text-sm font-semibold text-slate-300 uppercase tracking-wide mb-1">
                                        Description</h4>
                                    <p id="modalDescription"
                                        class="text-slate-400 leading-relaxed text-sm md:text-base h-24 overflow-y-auto pr-2">
                                        Book description goes here...</p>
                                </div>
                                <div class="grid grid-cols-2 gap-4 pt-4 border-t border-slate-700/50">
                                    <div>
                                        <h4 class="text-xs font-semibold text-slate-500 uppercase">Track Number</h4>
                                        <p id="modalLocation" class="text-slate-200 text-sm">Shelf A-12</p>
                                    </div>
                                    <div>
                                        <h4 class="text-xs font-semibold text-slate-500 uppercase">Status</h4>
                                        <div id="modalStatus" class="flex items-center text-sm font-bold"></div>
                                    </div>
                                </div>
                                <div class="pt-4">
                                    <button id="actionButton"
                                        class="w-full text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2 uppercase tracking-wide text-sm shadow-lg"></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Auth Modal (exact from original) -->
    <div id="authModal" class="fixed inset-0 z-[200] hidden">
        <div class="fixed inset-0 bg-slate-900/95 backdrop-blur-sm" onclick="closeAuthModal()"></div>
        <div class="fixed inset-0 flex items-center justify-center p-4">
            <div class="bg-slate-800 rounded-2xl shadow-2xl max-w-md w-full p-8 border border-slate-700">
                <h2 class="text-2xl font-bold text-white mb-6 text-center" id="authTitle">Login</h2>
                <div id="authForm">
                    <input type="email" id="authEmail" placeholder="Email"
                        class="w-full bg-slate-700 text-white rounded-lg px-4 py-3 mb-4 focus:ring-2 focus:ring-emerald-500 outline-none">
                    <input type="password" id="authPassword" placeholder="Password"
                        class="w-full bg-slate-700 text-white rounded-lg px-4 py-3 mb-6 focus:ring-2 focus:ring-emerald-500 outline-none">
                    <div class="text-center mt-3">
                        <button onclick="forgotPassword()" class="text-sm text-emerald-400 hover:underline">Forgot
                            password?</button>
                    </div>
                    <div class="my-4">
                        <div class="relative">
                            <div class="absolute inset-0 flex items-center">
                                <div class="w-full border-t border-slate-600"></div>
                            </div>
                            <div class="relative flex justify-center text-sm"><span
                                    class="px-2 bg-slate-800 text-slate-400">or</span></div>
                        </div>
                    </div>
                    <button onclick="googleSignIn()"
                        class="w-full bg-white text-black font-medium py-3 rounded-lg flex items-center justify-center gap-3 hover:bg-gray-100 transition">
                        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google"
                            class="w-5 h-5">
                        Continue with Google
                    </button>
                    <button id="authMainBtn" onclick="login()"
                        class="w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-3 rounded-lg mb-3">Login</button>
                    <p class="text-center text-slate-400 text-sm">
                        <span id="authToggleText">Don't have an account?</span>
                        <button onclick="toggleAuthMode()"
                            class="text-emerald-400 hover:underline font-bold">Register</button>
                    </p>
                </div>
                <button onclick="closeAuthModal()" class="absolute top-4 right-4 text-slate-400 hover:text-white">
                    <i class="fa-solid fa-xmark text-xl"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module">
        import { books } from './js/books-data.js';
        import { initFirebase } from './js/firebase-config.js';
        import { initApp } from './js/app.js';

        window.booksData = books;
        initFirebase();
        initApp();
    </script>
</body>

</html>